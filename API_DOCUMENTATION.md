# ØªÙˆØ«ÙŠÙ‚ ÙˆØ§Ø¬Ù‡Ø© Ø¨Ø±Ù…Ø¬Ø© Ø§Ù„ØªØ·Ø¨ÙŠÙ‚Ø§Øª (API Documentation)

**Ù…Ù†ØµØ© Ø³ÙÙ‡ÙˆÙ„ - Ø§Ù„ÙˆØ§Ø¬Ù‡Ø§Øª Ø§Ù„Ù…Ø­Ø³Ù‘Ù†Ø©**

**Ø§Ù„Ø¥ØµØ¯Ø§Ø±:** 2.0  
**Ø§Ù„ØªØ§Ø±ÙŠØ®:** Ù†ÙˆÙÙ…Ø¨Ø± 2025  
**Ø§Ù„Ù…Ø¤Ù„Ù:** Manus AI

---

## Ù†Ø¸Ø±Ø© Ø¹Ø§Ù…Ø©

ØªÙˆÙØ± Ù…Ù†ØµØ© Ø³ÙÙ‡ÙˆÙ„ ÙˆØ§Ø¬Ù‡Ø© Ø¨Ø±Ù…Ø¬Ø© ØªØ·Ø¨ÙŠÙ‚Ø§Øª Ø´Ø§Ù…Ù„Ø© Ù…Ø¨Ù†ÙŠØ© Ø¹Ù„Ù‰ **tRPC** ØªØªÙŠØ­ Ø§Ù„ÙˆØµÙˆÙ„ Ø¥Ù„Ù‰ Ø¬Ù…ÙŠØ¹ Ù…ÙŠØ²Ø§Øª Ø§Ù„Ù…Ù†ØµØ© Ø¨Ø·Ø±ÙŠÙ‚Ø© Ø¢Ù…Ù†Ø© ÙˆÙ…ÙØ­Ø³Ù‘Ù†Ø©. ØªØ³ØªØ®Ø¯Ù… Ø§Ù„Ù…Ù†ØµØ© **TypeScript** Ù„Ø¶Ù…Ø§Ù† Ø³Ù„Ø§Ù…Ø© Ø§Ù„Ø£Ù†ÙˆØ§Ø¹ (Type Safety) ÙˆØªÙˆÙØ± ØªØ¬Ø±Ø¨Ø© ØªØ·ÙˆÙŠØ± Ù…Ø­Ø³Ù‘Ù†Ø© Ù…Ø¹ IntelliSense Ø§Ù„ÙƒØ§Ù…Ù„.

### Ø§Ù„Ù…Ù…ÙŠØ²Ø§Øª Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©

ØªØªÙ…ÙŠØ² ÙˆØ§Ø¬Ù‡Ø© Ø¨Ø±Ù…Ø¬Ø© Ø§Ù„ØªØ·Ø¨ÙŠÙ‚Ø§Øª Ø¨Ø¹Ø¯Ø© Ø®ØµØ§Ø¦Øµ Ù…ØªÙ‚Ø¯Ù…Ø© ØªØ¬Ø¹Ù„Ù‡Ø§ Ù…Ù†Ø§Ø³Ø¨Ø© Ù„Ù„ØªØ·Ø¨ÙŠÙ‚Ø§Øª Ø§Ù„Ø¥Ù†ØªØ§Ø¬ÙŠØ©. Ø£ÙˆÙ„Ø§Ù‹ØŒ ØªÙˆÙØ± **Type Safety** ÙƒØ§Ù…Ù„Ø© Ø­ÙŠØ« ÙŠØªÙ… Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø£Ù†ÙˆØ§Ø¹ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ ÙÙŠ ÙˆÙ‚Øª Ø§Ù„ØªØ·ÙˆÙŠØ± ÙˆØ§Ù„ØªØ´ØºÙŠÙ„. Ø«Ø§Ù†ÙŠØ§Ù‹ØŒ ØªØ³ØªØ®Ø¯Ù… **Redis Caching** Ù„ØªØ­Ø³ÙŠÙ† Ø§Ù„Ø£Ø¯Ø§Ø¡ ÙˆØªÙ‚Ù„ÙŠÙ„ Ø§Ù„Ø­Ù…Ù„ Ø¹Ù„Ù‰ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª. Ø«Ø§Ù„Ø«Ø§Ù‹ØŒ ØªÙˆÙØ± **Authentication & Authorization** Ù…ØªÙƒØ§Ù…Ù„Ø© Ù…Ø¹ Ù†Ø¸Ø§Ù… Manus OAuth. Ø±Ø§Ø¨Ø¹Ø§Ù‹ØŒ ØªØ¯Ø¹Ù… **Real-time Updates** Ù…Ù† Ø®Ù„Ø§Ù„ ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹. ÙˆØ£Ø®ÙŠØ±Ø§Ù‹ØŒ ØªØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ **Error Handling** Ø´Ø§Ù…Ù„ Ù…Ø¹ Ø±Ø³Ø§Ø¦Ù„ Ø®Ø·Ø£ ÙˆØ§Ø¶Ø­Ø© Ø¨Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©.

### Ø§Ù„Ø¨Ù†ÙŠØ© Ø§Ù„ØªÙ‚Ù†ÙŠØ©

ØªØ¹ØªÙ…Ø¯ Ø§Ù„Ù…Ù†ØµØ© Ø¹Ù„Ù‰ **tRPC 11** ÙƒØ¥Ø·Ø§Ø± Ø¹Ù…Ù„ Ø±Ø¦ÙŠØ³ÙŠØŒ Ù…Ø¹ **Express 4** ÙƒØ®Ø§Ø¯Ù… HTTPØŒ Ùˆ**Drizzle ORM** Ù„Ù„ØªØ¹Ø§Ù…Ù„ Ù…Ø¹ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§ØªØŒ Ùˆ**Zod** Ù„Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ØµØ­Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§ØªØŒ Ùˆ**Redis** Ù„Ù„ØªØ®Ø²ÙŠÙ† Ø§Ù„Ù…Ø¤Ù‚ØªØŒ Ùˆ**Superjson** Ù„Ø¯Ø¹Ù… Ø£Ù†ÙˆØ§Ø¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø¹Ù‚Ø¯Ø© Ù…Ø«Ù„ Date.

---

## Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø© ÙˆØ§Ù„ØªØ±Ø®ÙŠØµ (Authentication & Authorization)

### Ù†Ø¸Ø§Ù… Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø©

ØªØ³ØªØ®Ø¯Ù… Ø§Ù„Ù…Ù†ØµØ© Ù†Ø¸Ø§Ù… **Manus OAuth** Ù„Ù„Ù…ØµØ§Ø¯Ù‚Ø©ØŒ Ø­ÙŠØ« ÙŠØªÙ… ØªØ®Ø²ÙŠÙ† Ø§Ù„Ø¬Ù„Ø³Ø© ÙÙŠ **Cookie** Ø¢Ù…Ù† Ù…Ø¹ **JWT Token**. ÙŠØªÙ… Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø¬Ù„Ø³Ø© ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ ÙÙŠ ÙƒÙ„ Ø·Ù„Ø¨ØŒ ÙˆÙŠØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¬Ù„Ø³Ø© Ø¹Ù†Ø¯ ÙƒÙ„ ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„.

### Ø§Ù„Ø£Ø¯ÙˆØ§Ø± ÙˆØ§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª

ÙŠØ¯Ø¹Ù… Ø§Ù„Ù†Ø¸Ø§Ù… Ø£Ø±Ø¨Ø¹Ø© Ø£Ø¯ÙˆØ§Ø± Ø±Ø¦ÙŠØ³ÙŠØ©:

| Ø§Ù„Ø¯ÙˆØ± | Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª | Ø§Ù„ÙˆØµÙ |
|------|-----------|-------|
| **admin** | Ø¬Ù…ÙŠØ¹ Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª | Ø§Ù„Ù…Ø¯ÙŠØ± Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ Ù„Ù„Ù…Ù†ØµØ© |
| **manager** | Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø²Ø§Ø±Ø¹ ÙˆØ§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† | Ù…Ø¯ÙŠØ± Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª |
| **operator** | ØªÙ†ÙÙŠØ° Ø§Ù„Ù…Ù‡Ø§Ù… | Ù…Ø´ØºÙ„ Ø§Ù„Ù…Ø¹Ø¯Ø§Øª |
| **farmer** | Ø¹Ø±Ø¶ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ÙÙ‚Ø· | Ù…Ø²Ø§Ø±Ø¹ (Ù‚Ø±Ø§Ø¡Ø© ÙÙ‚Ø·) |

### Procedures Types

ØªÙ†Ù‚Ø³Ù… Ø§Ù„Ù€ procedures Ø¥Ù„Ù‰ Ù†ÙˆØ¹ÙŠÙ†:

**publicProcedure**: Ù…ØªØ§Ø­ Ù„Ù„Ø¬Ù…ÙŠØ¹ Ø¨Ø¯ÙˆÙ† Ù…ØµØ§Ø¯Ù‚Ø© (Ù…Ø«Ù„ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„).

**protectedProcedure**: ÙŠØªØ·Ù„Ø¨ Ù…ØµØ§Ø¯Ù‚Ø©ØŒ ÙŠØªÙ… Ø­Ù‚Ù† `ctx.user` ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹.

---

## Ø§Ù„ÙˆØ§Ø¬Ù‡Ø§Øª Ø§Ù„Ø¨Ø±Ù…Ø¬ÙŠØ© (API Endpoints)

### 1. Authentication API

#### `auth.me`

**Ø§Ù„Ù†ÙˆØ¹:** Query  
**Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø©:** Public  
**Ø§Ù„ÙˆØµÙ:** Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø­Ø§Ù„ÙŠ

**Ø§Ù„Ù…Ø¯Ø®Ù„Ø§Øª:** Ù„Ø§ ÙŠÙˆØ¬Ø¯

**Ø§Ù„Ù…Ø®Ø±Ø¬Ø§Øª:**
```typescript
{
  id: number;
  openId: string;
  name: string | null;
  email: string | null;
  role: "admin" | "manager" | "operator" | "farmer";
  createdAt: Date;
  lastSignedIn: Date;
}
```

**Ù…Ø«Ø§Ù„ Ø§Ø³ØªØ®Ø¯Ø§Ù…:**
```typescript
const { data: user } = trpc.auth.me.useQuery();
```

#### `auth.logout`

**Ø§Ù„Ù†ÙˆØ¹:** Mutation  
**Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø©:** Public  
**Ø§Ù„ÙˆØµÙ:** ØªØ³Ø¬ÙŠÙ„ Ø®Ø±ÙˆØ¬ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…

**Ø§Ù„Ù…Ø¯Ø®Ù„Ø§Øª:** Ù„Ø§ ÙŠÙˆØ¬Ø¯

**Ø§Ù„Ù…Ø®Ø±Ø¬Ø§Øª:**
```typescript
{ success: true }
```

**Ù…Ø«Ø§Ù„ Ø§Ø³ØªØ®Ø¯Ø§Ù…:**
```typescript
const logoutMutation = trpc.auth.logout.useMutation();
await logoutMutation.mutateAsync();
```

---

### 2. Dashboard API â­ Ø¬Ø¯ÙŠØ¯

#### `dashboard.getStats`

**Ø§Ù„Ù†ÙˆØ¹:** Query  
**Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø©:** Protected  
**Ø§Ù„ØªØ®Ø²ÙŠÙ† Ø§Ù„Ù…Ø¤Ù‚Øª:** 5 Ø¯Ù‚Ø§Ø¦Ù‚  
**Ø§Ù„ÙˆØµÙ:** Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Dashboard Ø§Ù„Ø´Ø§Ù…Ù„Ø©

**Ø§Ù„Ù…Ø¯Ø®Ù„Ø§Øª:** Ù„Ø§ ÙŠÙˆØ¬Ø¯

**Ø§Ù„Ù…Ø®Ø±Ø¬Ø§Øª:**
```typescript
{
  farms: {
    totalFarms: number;
    totalArea: number;
  };
  fields: {
    totalFields: number;
  };
  equipment: {
    totalEquipment: number;
    activeEquipment: number;
  };
  droneAnalysis: {
    totalImages: number;
    processedImages: number;
    avgNdvi: number;
    totalPests: number;
    highWaterStress: number;
  };
  diseaseDetection: {
    totalDetections: number;
    completedDetections: number;
  };
  lastUpdated: Date;
}
```

**Ù…Ø«Ø§Ù„ Ø§Ø³ØªØ®Ø¯Ø§Ù…:**
```typescript
const { data: stats, isLoading } = trpc.dashboard.getStats.useQuery();
```

**Ù…Ù„Ø§Ø­Ø¸Ø§Øª:**
- ÙŠØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ ÙƒÙ„ Ø¯Ù‚ÙŠÙ‚Ø©
- ÙŠØªÙ… Ø­Ø³Ø§Ø¨ Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ù…Ù† Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ø¨Ø§Ø´Ø±Ø©
- ÙŠØªÙ… ØªØ®Ø²ÙŠÙ† Ø§Ù„Ù†ØªØ§Ø¦Ø¬ ÙÙŠ Redis Ù„Ù…Ø¯Ø© 5 Ø¯Ù‚Ø§Ø¦Ù‚

#### `dashboard.getChartData`

**Ø§Ù„Ù†ÙˆØ¹:** Query  
**Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø©:** Protected  
**Ø§Ù„ØªØ®Ø²ÙŠÙ† Ø§Ù„Ù…Ø¤Ù‚Øª:** 10 Ø¯Ù‚Ø§Ø¦Ù‚  
**Ø§Ù„ÙˆØµÙ:** Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø±Ø³ÙˆÙ… Ø§Ù„Ø¨ÙŠØ§Ù†ÙŠØ©

**Ø§Ù„Ù…Ø¯Ø®Ù„Ø§Øª:**
```typescript
{
  type: "ndvi" | "diseases" | "productivity";
  period: "week" | "month" | "year"; // default: "month"
}
```

**Ø§Ù„Ù…Ø®Ø±Ø¬Ø§Øª:**
```typescript
Array<{
  date: string;
  value: number;
}>
```

**Ù…Ø«Ø§Ù„ Ø§Ø³ØªØ®Ø¯Ø§Ù…:**
```typescript
const { data: chartData } = trpc.dashboard.getChartData.useQuery({
  type: "ndvi",
  period: "month"
});
```

#### `dashboard.getRecentAlerts`

**Ø§Ù„Ù†ÙˆØ¹:** Query  
**Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø©:** Protected  
**Ø§Ù„ØªØ®Ø²ÙŠÙ† Ø§Ù„Ù…Ø¤Ù‚Øª:** 1 Ø¯Ù‚ÙŠÙ‚Ø©  
**Ø§Ù„ÙˆØµÙ:** Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø¢Ø®Ø± Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡Ø§Øª

**Ø§Ù„Ù…Ø¯Ø®Ù„Ø§Øª:**
```typescript
{
  limit: number; // default: 5
}
```

**Ø§Ù„Ù…Ø®Ø±Ø¬Ø§Øª:**
```typescript
Array<{
  id: number;
  type: string;
  title: string;
  message: string;
  priority: string;
  createdAt: Date;
}>
```

**Ù…Ø«Ø§Ù„ Ø§Ø³ØªØ®Ø¯Ø§Ù…:**
```typescript
const { data: alerts } = trpc.dashboard.getRecentAlerts.useQuery({ limit: 10 });
```

---

### 3. Farms API (Ù…Ø¹ Redis Caching)

#### `farms.list`

**Ø§Ù„Ù†ÙˆØ¹:** Query  
**Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø©:** Protected  
**Ø§Ù„ØªØ®Ø²ÙŠÙ† Ø§Ù„Ù…Ø¤Ù‚Øª:** 5 Ø¯Ù‚Ø§Ø¦Ù‚ âœ…  
**Ø§Ù„ÙˆØµÙ:** Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ø²Ø§Ø±Ø¹ Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø­Ø§Ù„ÙŠ

**Ø§Ù„Ù…Ø¯Ø®Ù„Ø§Øª:** Ù„Ø§ ÙŠÙˆØ¬Ø¯

**Ø§Ù„Ù…Ø®Ø±Ø¬Ø§Øª:**
```typescript
Array<{
  id: number;
  ownerId: number;
  name: string;
  location: string | null;
  totalArea: number | null;
  createdAt: Date;
  updatedAt: Date;
}>
```

**Ù…Ø«Ø§Ù„ Ø§Ø³ØªØ®Ø¯Ø§Ù…:**
```typescript
const { data: farms } = trpc.farms.list.useQuery();
```

#### `farms.getById`

**Ø§Ù„Ù†ÙˆØ¹:** Query  
**Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø©:** Protected  
**Ø§Ù„ØªØ®Ø²ÙŠÙ† Ø§Ù„Ù…Ø¤Ù‚Øª:** 5 Ø¯Ù‚Ø§Ø¦Ù‚ âœ…  
**Ø§Ù„ÙˆØµÙ:** Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ ØªÙØ§ØµÙŠÙ„ Ù…Ø²Ø±Ø¹Ø© Ù…Ø¹ÙŠÙ†Ø©

**Ø§Ù„Ù…Ø¯Ø®Ù„Ø§Øª:**
```typescript
{
  farmId: number;
}
```

**Ø§Ù„Ù…Ø®Ø±Ø¬Ø§Øª:**
```typescript
{
  id: number;
  ownerId: number;
  name: string;
  location: string | null;
  totalArea: number | null;
  createdAt: Date;
  updatedAt: Date;
}
```

**Ù…Ø«Ø§Ù„ Ø§Ø³ØªØ®Ø¯Ø§Ù…:**
```typescript
const { data: farm } = trpc.farms.getById.useQuery({ farmId: 1 });
```

#### `farms.create`

**Ø§Ù„Ù†ÙˆØ¹:** Mutation  
**Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø©:** Protected  
**Ø§Ù„ÙˆØµÙ:** Ø¥Ù†Ø´Ø§Ø¡ Ù…Ø²Ø±Ø¹Ø© Ø¬Ø¯ÙŠØ¯Ø©

**Ø§Ù„Ù…Ø¯Ø®Ù„Ø§Øª:**
```typescript
{
  name: string; // 1-100 Ø­Ø±Ù
  location?: string; // max 200 Ø­Ø±Ù
  totalArea?: number; // Ù…ÙˆØ¬Ø¨
}
```

**Ø§Ù„Ù…Ø®Ø±Ø¬Ø§Øª:**
```typescript
{
  id: number;
  ownerId: number;
  name: string;
  location: string | null;
  totalArea: number | null;
  createdAt: Date;
  updatedAt: Date;
}
```

**Ù…Ø«Ø§Ù„ Ø§Ø³ØªØ®Ø¯Ø§Ù…:**
```typescript
const createFarm = trpc.farms.create.useMutation();
await createFarm.mutateAsync({
  name: "Ù…Ø²Ø±Ø¹Ø© Ø§Ù„Ø£Ù…Ù„",
  location: "Ø§Ù„Ø±ÙŠØ§Ø¶",
  totalArea: 100
});
```

**Ù…Ù„Ø§Ø­Ø¸Ø§Øª:**
- ÙŠØªÙ… Ø¥Ù„ØºØ§Ø¡ Ø§Ù„ØªØ®Ø²ÙŠÙ† Ø§Ù„Ù…Ø¤Ù‚Øª ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ Ø¨Ø¹Ø¯ Ø§Ù„Ø¥Ù†Ø´Ø§Ø¡ âœ…
- ÙŠØªÙ… ØªØ¹ÙŠÙŠÙ† `ownerId` ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ Ù…Ù† Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø­Ø§Ù„ÙŠ

#### `farms.update`

**Ø§Ù„Ù†ÙˆØ¹:** Mutation  
**Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø©:** Protected  
**Ø§Ù„ÙˆØµÙ:** ØªØ­Ø¯ÙŠØ« Ù…Ø²Ø±Ø¹Ø© Ù…ÙˆØ¬ÙˆØ¯Ø©

**Ø§Ù„Ù…Ø¯Ø®Ù„Ø§Øª:**
```typescript
{
  farmId: number;
  name: string;
  location?: string;
  totalArea?: number;
}
```

**Ø§Ù„Ù…Ø®Ø±Ø¬Ø§Øª:**
```typescript
{
  id: number;
  ownerId: number;
  name: string;
  location: string | null;
  totalArea: number | null;
  createdAt: Date;
  updatedAt: Date;
}
```

**Ù…Ø«Ø§Ù„ Ø§Ø³ØªØ®Ø¯Ø§Ù…:**
```typescript
const updateFarm = trpc.farms.update.useMutation();
await updateFarm.mutateAsync({
  farmId: 1,
  name: "Ù…Ø²Ø±Ø¹Ø© Ø§Ù„Ø£Ù…Ù„ Ø§Ù„Ù…Ø­Ø¯Ø«Ø©",
  totalArea: 150
});
```

**Ù…Ù„Ø§Ø­Ø¸Ø§Øª:**
- ÙŠØªÙ… Ø¥Ù„ØºØ§Ø¡ Ø§Ù„ØªØ®Ø²ÙŠÙ† Ø§Ù„Ù…Ø¤Ù‚Øª ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ Ø¨Ø¹Ø¯ Ø§Ù„ØªØ­Ø¯ÙŠØ« âœ…

#### `farms.delete`

**Ø§Ù„Ù†ÙˆØ¹:** Mutation  
**Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø©:** Protected  
**Ø§Ù„ÙˆØµÙ:** Ø­Ø°Ù Ù…Ø²Ø±Ø¹Ø©

**Ø§Ù„Ù…Ø¯Ø®Ù„Ø§Øª:**
```typescript
{
  farmId: number;
}
```

**Ø§Ù„Ù…Ø®Ø±Ø¬Ø§Øª:**
```typescript
{ success: true }
```

**Ù…Ø«Ø§Ù„ Ø§Ø³ØªØ®Ø¯Ø§Ù…:**
```typescript
const deleteFarm = trpc.farms.delete.useMutation();
await deleteFarm.mutateAsync({ farmId: 1 });
```

**Ù…Ù„Ø§Ø­Ø¸Ø§Øª:**
- ÙŠØªÙ… Ø¥Ù„ØºØ§Ø¡ Ø§Ù„ØªØ®Ø²ÙŠÙ† Ø§Ù„Ù…Ø¤Ù‚Øª ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ Ø¨Ø¹Ø¯ Ø§Ù„Ø­Ø°Ù âœ…

---

### 4. Work Planner API (AI-Powered) ğŸ¤– Ø¬Ø¯ÙŠØ¯

#### `workPlanner.list`

**Ø§Ù„Ù†ÙˆØ¹:** Query  
**Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø©:** Protected  
**Ø§Ù„ØªØ®Ø²ÙŠÙ† Ø§Ù„Ù…Ø¤Ù‚Øª:** 5 Ø¯Ù‚Ø§Ø¦Ù‚ âœ…  
**Ø§Ù„ÙˆØµÙ:** Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø®Ø·Ø· Ø§Ù„Ø¹Ù…Ù„ Ù„Ø­Ù‚Ù„ Ù…Ø¹ÙŠÙ†

**Ø§Ù„Ù…Ø¯Ø®Ù„Ø§Øª:**
```typescript
{
  fieldId: number;
  limit?: number; // default: 20
  offset?: number; // default: 0
}
```

**Ø§Ù„Ù…Ø®Ø±Ø¬Ø§Øª:**
```typescript
Array<{
  id: number;
  fieldId: number;
  name: string;
  cropType: string | null;
  season: string | null;
  startDate: Date;
  endDate: Date | null;
  status: "active" | "completed" | "cancelled";
  estimatedCost: number | null;
  actualCost: number | null;
  createdAt: Date;
  updatedAt: Date;
}>
```

**Ù…Ø«Ø§Ù„ Ø§Ø³ØªØ®Ø¯Ø§Ù…:**
```typescript
const { data: workPlans } = trpc.workPlanner.list.useQuery({ fieldId: 1 });
```

#### `workPlanner.getTasks`

**Ø§Ù„Ù†ÙˆØ¹:** Query  
**Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø©:** Protected  
**Ø§Ù„ØªØ®Ø²ÙŠÙ† Ø§Ù„Ù…Ø¤Ù‚Øª:** 3 Ø¯Ù‚Ø§Ø¦Ù‚ âœ…  
**Ø§Ù„ÙˆØµÙ:** Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ù…Ù‡Ø§Ù… Ø®Ø·Ø© Ø¹Ù…Ù„ Ù…Ø¹ÙŠÙ†Ø©

**Ø§Ù„Ù…Ø¯Ø®Ù„Ø§Øª:**
```typescript
{
  workPlanId: number;
}
```

**Ø§Ù„Ù…Ø®Ø±Ø¬Ø§Øª:**
```typescript
Array<{
  id: number;
  workPlanId: number;
  name: string;
  description: string | null;
  type: string;
  scheduledDate: Date;
  completedDate: Date | null;
  assignedTo: number | null;
  equipmentId: number | null;
  status: "pending" | "in_progress" | "completed" | "cancelled";
  priority: "low" | "medium" | "high" | "urgent";
  estimatedDuration: number | null;
  actualDuration: number | null;
  createdAt: Date;
  updatedAt: Date;
}>
```

**Ù…Ø«Ø§Ù„ Ø§Ø³ØªØ®Ø¯Ø§Ù…:**
```typescript
const { data: tasks } = trpc.workPlanner.getTasks.useQuery({ workPlanId: 1 });
```

#### `workPlanner.generateAIRecommendations` ğŸ¤–

**Ø§Ù„Ù†ÙˆØ¹:** Mutation  
**Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø©:** Protected  
**Ø§Ù„ÙˆØµÙ:** ØªÙˆÙ„ÙŠØ¯ ØªÙˆØµÙŠØ§Øª Ø°ÙƒÙŠØ© Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø·Ø§Ø¦Ø±Ø§Øª ÙˆØ§Ù„Ø£Ù…Ø±Ø§Ø¶

**Ø§Ù„Ù…Ø¯Ø®Ù„Ø§Øª:**
```typescript
{
  fieldId: number;
  farmId: number;
}
```

**Ø§Ù„Ù…Ø®Ø±Ø¬Ø§Øª:**
```typescript
{
  success: boolean;
  message: string;
  recommendations: Array<{
    title: string;
    description: string;
    priority: "high" | "medium" | "low";
    timeframe: "urgent" | "this_week" | "this_month";
  }>;
  analysisData: {
    avgNdvi: number;
    pestCount: number;
    highWaterStressCount: number;
    diseaseCount: number;
  };
}
```

**Ù…Ø«Ø§Ù„ Ø§Ø³ØªØ®Ø¯Ø§Ù…:**
```typescript
const generateRecommendations = trpc.workPlanner.generateAIRecommendations.useMutation();
const result = await generateRecommendations.mutateAsync({
  fieldId: 1,
  farmId: 1
});

console.log(result.recommendations);
// [
//   {
//     title: "ØªØ­Ø³ÙŠÙ† ØµØ­Ø© Ø§Ù„Ù…Ø­Ø§ØµÙŠÙ„",
//     description: "Ù…Ø¤Ø´Ø± NDVI Ù…Ù†Ø®ÙØ¶...",
//     priority: "high",
//     timeframe: "urgent"
//   }
// ]
```

**ÙƒÙŠÙ ÙŠØ¹Ù…Ù„:**
1. ÙŠØ¬Ù…Ø¹ Ø¨ÙŠØ§Ù†Ø§Øª ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø·Ø§Ø¦Ø±Ø§Øª (NDVIØŒ Ø§Ù„Ø¢ÙØ§ØªØŒ Ø§Ù„Ø¥Ø¬Ù‡Ø§Ø¯ Ø§Ù„Ù…Ø§Ø¦ÙŠ)
2. ÙŠØ¬Ù…Ø¹ Ø¨ÙŠØ§Ù†Ø§Øª ÙƒØ´Ù Ø§Ù„Ø£Ù…Ø±Ø§Ø¶
3. ÙŠØ³ØªØ®Ø¯Ù… **LLM (Large Language Model)** Ù„ØªÙˆÙ„ÙŠØ¯ ØªÙˆØµÙŠØ§Øª Ù…Ø®ØµØµØ©
4. Ø¥Ø°Ø§ ÙØ´Ù„ LLMØŒ ÙŠØ³ØªØ®Ø¯Ù… Ù†Ø¸Ø§Ù… Fallback Ø°ÙƒÙŠ

**Ù…Ù„Ø§Ø­Ø¸Ø§Øª:**
- ÙŠØªØ·Ù„Ø¨ ÙˆØ¬ÙˆØ¯ ØµÙˆØ± Ø·Ø§Ø¦Ø±Ø§Øª Ù„Ù„Ø­Ù‚Ù„
- ÙŠØ³ØªØ®Ø¯Ù… Ø¢Ø®Ø± 5 ØµÙˆØ± Ù„ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø§ØªØ¬Ø§Ù‡Ø§Øª
- Ø§Ù„ØªÙˆØµÙŠØ§Øª Ù…Ø®ØµØµØ© Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ÙØ¹Ù„ÙŠØ©

#### `workPlanner.createFromRecommendations`

**Ø§Ù„Ù†ÙˆØ¹:** Mutation  
**Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø©:** Protected  
**Ø§Ù„ÙˆØµÙ:** Ø¥Ù†Ø´Ø§Ø¡ Ø®Ø·Ø© Ø¹Ù…Ù„ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ Ù…Ù† Ø§Ù„ØªÙˆØµÙŠØ§Øª

**Ø§Ù„Ù…Ø¯Ø®Ù„Ø§Øª:**
```typescript
{
  fieldId: number;
  recommendations: Array<{
    title: string;
    description: string;
    priority: "high" | "medium" | "low";
    timeframe: "urgent" | "this_week" | "this_month";
  }>;
}
```

**Ø§Ù„Ù…Ø®Ø±Ø¬Ø§Øª:**
```typescript
{
  success: boolean;
  workPlanId: number;
  tasksCreated: number;
}
```

**Ù…Ø«Ø§Ù„ Ø§Ø³ØªØ®Ø¯Ø§Ù…:**
```typescript
// 1. ØªÙˆÙ„ÙŠØ¯ Ø§Ù„ØªÙˆØµÙŠØ§Øª
const recommendations = await generateRecommendations.mutateAsync({
  fieldId: 1,
  farmId: 1
});

// 2. Ø¥Ù†Ø´Ø§Ø¡ Ø®Ø·Ø© Ø¹Ù…Ù„
const createPlan = trpc.workPlanner.createFromRecommendations.useMutation();
const result = await createPlan.mutateAsync({
  fieldId: 1,
  recommendations: recommendations.recommendations
});

console.log(`ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ ${result.tasksCreated} Ù…Ù‡Ù…Ø©`);
```

---

### 5. Drone Images API (Ù…Ø¹ Redis Caching)

#### `droneImages.upload`

**Ø§Ù„Ù†ÙˆØ¹:** Mutation  
**Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø©:** Protected  
**Ø§Ù„ÙˆØµÙ:** Ø±ÙØ¹ ØµÙˆØ±Ø© Ø·Ø§Ø¦Ø±Ø© Ù„Ù„ØªØ­Ù„ÙŠÙ„

**Ø§Ù„Ù…Ø¯Ø®Ù„Ø§Øª:**
```typescript
{
  farmId: number;
  fieldId?: number;
  fileName: string;
  fileData: string; // base64
  captureDate?: Date;
  altitude?: number;
  gpsLatitude?: string;
  gpsLongitude?: string;
}
```

**Ø§Ù„Ù…Ø®Ø±Ø¬Ø§Øª:**
```typescript
{
  imageId: number;
  status: "processing";
  message: string;
}
```

**Ù…Ø«Ø§Ù„ Ø§Ø³ØªØ®Ø¯Ø§Ù…:**
```typescript
const uploadImage = trpc.droneImages.upload.useMutation();
const result = await uploadImage.mutateAsync({
  farmId: 1,
  fieldId: 1,
  fileName: "field1_20251103.jpg",
  fileData: base64String,
  altitude: 100,
  gpsLatitude: "24.7136",
  gpsLongitude: "46.6753"
});
```

#### `droneImages.list`

**Ø§Ù„Ù†ÙˆØ¹:** Query  
**Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø©:** Protected  
**Ø§Ù„ØªØ®Ø²ÙŠÙ† Ø§Ù„Ù…Ø¤Ù‚Øª:** 3 Ø¯Ù‚Ø§Ø¦Ù‚ âœ…  
**Ø§Ù„ÙˆØµÙ:** Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ù‚Ø§Ø¦Ù…Ø© ØµÙˆØ± Ø§Ù„Ø·Ø§Ø¦Ø±Ø§Øª

**Ø§Ù„Ù…Ø¯Ø®Ù„Ø§Øª:**
```typescript
{
  farmId: number;
  fieldId?: number;
  limit?: number; // default: 20
  offset?: number; // default: 0
}
```

**Ø§Ù„Ù…Ø®Ø±Ø¬Ø§Øª:**
```typescript
Array<{
  id: number;
  farmId: number;
  fieldId: number | null;
  uploadedBy: number;
  fileName: string;
  fileSize: number;
  fileType: string;
  storagePath: string;
  storageUrl: string;
  captureDate: Date | null;
  altitude: number | null;
  gpsLatitude: string | null;
  gpsLongitude: string | null;
  status: "uploaded" | "processing" | "processed" | "failed";
  createdAt: Date;
  updatedAt: Date;
}>
```

**Ù…Ø«Ø§Ù„ Ø§Ø³ØªØ®Ø¯Ø§Ù…:**
```typescript
const { data: images } = trpc.droneImages.list.useQuery({
  farmId: 1,
  fieldId: 1,
  limit: 10
});
```

#### `droneImages.getProcessingStatus`

**Ø§Ù„Ù†ÙˆØ¹:** Query  
**Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø©:** Protected  
**Ø§Ù„ØªØ®Ø²ÙŠÙ† Ø§Ù„Ù…Ø¤Ù‚Øª:** 30 Ø«Ø§Ù†ÙŠØ© âœ…  
**Ø§Ù„ÙˆØµÙ:** Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø­Ø§Ù„Ø© Ù…Ø¹Ø§Ù„Ø¬Ø© ØµÙˆØ±Ø©

**Ø§Ù„Ù…Ø¯Ø®Ù„Ø§Øª:**
```typescript
{
  imageId: number;
}
```

**Ø§Ù„Ù…Ø®Ø±Ø¬Ø§Øª:**
```typescript
Array<{
  id: number;
  imageId: number;
  jobType: "ndvi" | "segmentation" | "object_detection";
  status: "queued" | "processing" | "completed" | "failed";
  progress: number | null;
  errorMessage: string | null;
  createdAt: Date;
  updatedAt: Date;
}>
```

**Ù…Ø«Ø§Ù„ Ø§Ø³ØªØ®Ø¯Ø§Ù…:**
```typescript
const { data: jobs } = trpc.droneImages.getProcessingStatus.useQuery({
  imageId: 1
});
```

---

### 6. Disease Detection API

#### `diseaseDetection.uploadImage`

**Ø§Ù„Ù†ÙˆØ¹:** Mutation  
**Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø©:** Protected  
**Ø§Ù„ÙˆØµÙ:** Ø±ÙØ¹ ØµÙˆØ±Ø© Ù„ÙƒØ´Ù Ø§Ù„Ø£Ù…Ø±Ø§Ø¶

**Ø§Ù„Ù…Ø¯Ø®Ù„Ø§Øª:**
```typescript
{
  farmId: number;
  fieldId?: number;
  imageUrl: string;
  cropType: string;
}
```

**Ø§Ù„Ù…Ø®Ø±Ø¬Ø§Øª:**
```typescript
{
  success: boolean;
  detectionId: number;
}
```

**Ù…Ø«Ø§Ù„ Ø§Ø³ØªØ®Ø¯Ø§Ù…:**
```typescript
const uploadImage = trpc.diseaseDetection.uploadImage.useMutation();
const result = await uploadImage.mutateAsync({
  farmId: 1,
  fieldId: 1,
  imageUrl: "https://...",
  cropType: "tomato"
});
```

#### `diseaseDetection.simulateYOLO`

**Ø§Ù„Ù†ÙˆØ¹:** Mutation  
**Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø©:** Protected  
**Ø§Ù„ÙˆØµÙ:** Ù…Ø­Ø§ÙƒØ§Ø© Ù…Ø¹Ø§Ù„Ø¬Ø© YOLO (Ù„Ù„Ù†Ù…ÙˆØ°Ø¬ Ø§Ù„Ø£ÙˆÙ„ÙŠ)

**Ø§Ù„Ù…Ø¯Ø®Ù„Ø§Øª:**
```typescript
{
  detectionId: number;
}
```

**Ø§Ù„Ù…Ø®Ø±Ø¬Ø§Øª:**
```typescript
{
  success: boolean;
  detectionId: number;
  diseases: Array<{
    name: string;
    confidence: string;
    severity: "low" | "moderate" | "high" | "critical";
    affectedArea: string;
    recommendations: string;
  }>;
}
```

**Ù…Ø«Ø§Ù„ Ø§Ø³ØªØ®Ø¯Ø§Ù…:**
```typescript
const simulateYOLO = trpc.diseaseDetection.simulateYOLO.useMutation();
const result = await simulateYOLO.mutateAsync({ detectionId: 1 });
```

---

## Ø§Ù„ØªØ®Ø²ÙŠÙ† Ø§Ù„Ù…Ø¤Ù‚Øª (Caching Strategy)

### Ù†Ø¸Ø§Ù… Redis

ØªØ³ØªØ®Ø¯Ù… Ø§Ù„Ù…Ù†ØµØ© **Redis** Ù„Ù„ØªØ®Ø²ÙŠÙ† Ø§Ù„Ù…Ø¤Ù‚Øª Ù„ØªØ­Ø³ÙŠÙ† Ø§Ù„Ø£Ø¯Ø§Ø¡. ÙŠØªÙ… ØªØ®Ø²ÙŠÙ† Ø§Ù„Ù†ØªØ§Ø¦Ø¬ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ ÙˆØ¥Ù„ØºØ§Ø¡ Ø§Ù„ØªØ®Ø²ÙŠÙ† Ø¹Ù†Ø¯ Ø§Ù„ØªØ­Ø¯ÙŠØ«.

### Ù…ÙØ§ØªÙŠØ­ Ø§Ù„ØªØ®Ø²ÙŠÙ† Ø§Ù„Ù…Ø¤Ù‚Øª

| Ø§Ù„Ù†ÙˆØ¹ | Ø§Ù„Ù…ÙØªØ§Ø­ | TTL |
|------|---------|-----|
| User Data | `user:{userId}:*` | 5 Ø¯Ù‚Ø§Ø¦Ù‚ |
| Farm Data | `farm:{farmId}:*` | 5 Ø¯Ù‚Ø§Ø¦Ù‚ |
| Drone Images | `farm:{farmId}:drone-images:*` | 3 Ø¯Ù‚Ø§Ø¦Ù‚ |
| Processing Status | `drone-image:{imageId}:processing-status` | 30 Ø«Ø§Ù†ÙŠØ© |
| Dashboard Stats | `user:{userId}:dashboard:stats` | 5 Ø¯Ù‚Ø§Ø¦Ù‚ |
| Chart Data | `user:{userId}:dashboard:chart:*` | 10 Ø¯Ù‚Ø§Ø¦Ù‚ |
| Alerts | `user:{userId}:dashboard:alerts:*` | 1 Ø¯Ù‚ÙŠÙ‚Ø© |
| Work Plans | `field:{fieldId}:work-plans:*` | 5 Ø¯Ù‚Ø§Ø¦Ù‚ |

### Ø¥Ù„ØºØ§Ø¡ Ø§Ù„ØªØ®Ø²ÙŠÙ† Ø§Ù„Ù…Ø¤Ù‚Øª

ÙŠØªÙ… Ø¥Ù„ØºØ§Ø¡ Ø§Ù„ØªØ®Ø²ÙŠÙ† Ø§Ù„Ù…Ø¤Ù‚Øª ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ Ø¹Ù†Ø¯:
- Ø¥Ù†Ø´Ø§Ø¡ Ø£Ùˆ ØªØ­Ø¯ÙŠØ« Ø£Ùˆ Ø­Ø°Ù Ù…Ø²Ø±Ø¹Ø©
- Ø±ÙØ¹ ØµÙˆØ±Ø© Ø·Ø§Ø¦Ø±Ø© Ø¬Ø¯ÙŠØ¯Ø©
- Ø¥Ù†Ø´Ø§Ø¡ Ø®Ø·Ø© Ø¹Ù…Ù„ Ø¬Ø¯ÙŠØ¯Ø©
- ØªØ­Ø¯ÙŠØ« Ø­Ø§Ù„Ø© Ù…Ø¹Ø§Ù„Ø¬Ø©

---

## Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ø£Ø®Ø·Ø§Ø¡ (Error Handling)

### Ø£Ù†ÙˆØ§Ø¹ Ø§Ù„Ø£Ø®Ø·Ø§Ø¡

| Ø§Ù„ÙƒÙˆØ¯ | Ø§Ù„ÙˆØµÙ | Ø§Ù„Ø­Ø§Ù„Ø© |
|------|-------|--------|
| `UNAUTHORIZED` | ØºÙŠØ± Ù…ØµØ±Ø­ | 401 |
| `FORBIDDEN` | Ù…Ù…Ù†ÙˆØ¹ | 403 |
| `NOT_FOUND` | ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯ | 404 |
| `BAD_REQUEST` | Ø·Ù„Ø¨ Ø®Ø§Ø·Ø¦ | 400 |
| `INTERNAL_SERVER_ERROR` | Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø®Ø§Ø¯Ù… | 500 |

### Ù…Ø«Ø§Ù„ Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ø£Ø®Ø·Ø§Ø¡

```typescript
const { data, error, isError } = trpc.farms.getById.useQuery({ farmId: 999 });

if (isError) {
  if (error.data?.code === 'NOT_FOUND') {
    console.log('Ø§Ù„Ù…Ø²Ø±Ø¹Ø© ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯Ø©');
  } else if (error.data?.code === 'FORBIDDEN') {
    console.log('Ù„ÙŠØ³ Ù„Ø¯ÙŠÙƒ ØµÙ„Ø§Ø­ÙŠØ© Ø§Ù„ÙˆØµÙˆÙ„');
  } else {
    console.log('Ø®Ø·Ø£ ØºÙŠØ± Ù…ØªÙˆÙ‚Ø¹:', error.message);
  }
}
```

---

## Ø£ÙØ¶Ù„ Ø§Ù„Ù…Ù…Ø§Ø±Ø³Ø§Øª (Best Practices)

### 1. Ø§Ø³ØªØ®Ø¯Ø§Ù… Optimistic Updates

```typescript
const utils = trpc.useUtils();
const createFarm = trpc.farms.create.useMutation({
  onMutate: async (newFarm) => {
    // Ø¥Ù„ØºØ§Ø¡ Ø§Ù„Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ø¬Ø§Ø±ÙŠØ©
    await utils.farms.list.cancel();
    
    // Ø­ÙØ¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø­Ø§Ù„ÙŠØ©
    const previousFarms = utils.farms.list.getData();
    
    // ØªØ­Ø¯ÙŠØ« Ù…ØªÙØ§Ø¦Ù„
    utils.farms.list.setData(undefined, (old) => [...(old || []), newFarm]);
    
    return { previousFarms };
  },
  onError: (err, newFarm, context) => {
    // Ø§Ø³ØªØ±Ø¬Ø§Ø¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø³Ø§Ø¨Ù‚Ø© Ø¹Ù†Ø¯ Ø§Ù„Ø®Ø·Ø£
    utils.farms.list.setData(undefined, context?.previousFarms);
  },
  onSettled: () => {
    // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¨Ø¹Ø¯ Ø§Ù„Ø§Ù†ØªÙ‡Ø§Ø¡
    utils.farms.list.invalidate();
  },
});
```

### 2. Ø§Ø³ØªØ®Ø¯Ø§Ù… Pagination

```typescript
const [page, setPage] = useState(0);
const limit = 20;

const { data: images } = trpc.droneImages.list.useQuery({
  farmId: 1,
  limit,
  offset: page * limit
});
```

### 3. Ø§Ø³ØªØ®Ø¯Ø§Ù… Polling Ù„Ù„ØªØ­Ø¯ÙŠØ«Ø§Øª

```typescript
const { data: processingStatus } = trpc.droneImages.getProcessingStatus.useQuery(
  { imageId: 1 },
  {
    refetchInterval: 5000, // ØªØ­Ø¯ÙŠØ« ÙƒÙ„ 5 Ø«ÙˆØ§Ù†Ù
    enabled: status !== 'completed' && status !== 'failed'
  }
);
```

---

## ğŸ“¡ Satellite Images API (Sentinel Hub)

### Overview

ØªÙƒØ§Ù…Ù„ Ù…Ø¹ **Sentinel Hub** Ù„Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ ØµÙˆØ± Ø§Ù„Ø£Ù‚Ù…Ø§Ø± Ø§Ù„ØµÙ†Ø§Ø¹ÙŠØ© Ù…Ù† Sentinel-2. ÙŠÙˆÙØ± ØµÙˆØ± RGB Ø­Ù‚ÙŠÙ‚ÙŠØ© ÙˆØµÙˆØ± NDVI Ù„ØªØ­Ù„ÙŠÙ„ ØµØ­Ø© Ø§Ù„Ù…Ø­Ø§ØµÙŠÙ„.

#### `satelliteImages.getTrueColorImage`

**Ø§Ù„Ù†ÙˆØ¹:** Mutation  
**Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø©:** Protected  
**Ø§Ù„ÙˆØµÙ:** Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ ØµÙˆØ±Ø© RGB Ø­Ù‚ÙŠÙ‚ÙŠØ© Ù…Ù† Sentinel-2

**Ø§Ù„Ù…Ø¯Ø®Ù„Ø§Øª:**
```typescript
{
  bbox: {
    minLon: number,
    minLat: number,
    maxLon: number,
    maxLat: number
  },
  dateFrom: string, // YYYY-MM-DD
  dateTo: string,
  resolution?: number // default: 10m
}
```

**Ø§Ù„Ù…Ø®Ø±Ø¬Ø§Øª:**
```typescript
{
  success: boolean;
  imageBase64: string;
  date: string;
  resolution: number;
  error?: string;
}
```

**Ù…Ø«Ø§Ù„ Ø§Ø³ØªØ®Ø¯Ø§Ù…:**
```typescript
const getImage = trpc.satelliteImages.getTrueColorImage.useMutation();
const result = await getImage.mutateAsync({
  bbox: {
    minLon: 46.6753,
    minLat: 24.7136,
    maxLon: 46.7753,
    maxLat: 24.8136
  },
  dateFrom: "2024-01-01",
  dateTo: "2024-01-31",
  resolution: 10
});
```

#### `satelliteImages.getNDVIImage`

**Ø§Ù„Ù†ÙˆØ¹:** Mutation  
**Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø©:** Protected  
**Ø§Ù„ÙˆØµÙ:** Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ ØµÙˆØ±Ø© NDVI Ù…Ù„ÙˆÙ†Ø© Ù…Ø¹ Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª

**Ø§Ù„Ù…Ø¯Ø®Ù„Ø§Øª:** Ù†ÙØ³ getTrueColorImage

**Ø§Ù„Ù…Ø®Ø±Ø¬Ø§Øª:**
```typescript
{
  success: boolean;
  imageBase64: string;
  ndviStats: {
    mean: number;
    min: number;
    max: number;
  };
  date: string;
  resolution: number;
  error?: string;
}
```

**NDVI Color Mapping:**

| NDVI Range | Ø§Ù„Ù„ÙˆÙ† | Ø§Ù„ØªÙØ³ÙŠØ± |
|------------|-------|-------------|
| < -0.2 | Ø±Ù…Ø§Ø¯ÙŠ | Ù…Ø§Ø¡/ØºÙŠÙˆÙ… |
| -0.2 - 0.0 | Ø¨Ù†ÙŠ | ØªØ±Ø¨Ø© Ø¹Ø§Ø±ÙŠØ© |
| 0.0 - 0.2 | Ø£ØµÙØ± ÙØ§ØªØ­ | Ù†Ø¨Ø§ØªØ§Øª Ø¶Ø¹ÙŠÙØ© |
| 0.2 - 0.4 | Ø£ØµÙØ±-Ø£Ø®Ø¶Ø± | Ù†Ø¨Ø§ØªØ§Øª Ù…ØªÙˆØ³Ø·Ø© |
| 0.4 - 0.6 | Ø£Ø®Ø¶Ø± ÙØ§ØªØ­ | Ù†Ø¨Ø§ØªØ§Øª Ø¬ÙŠØ¯Ø© |
| 0.6 - 0.8 | Ø£Ø®Ø¶Ø± | Ù†Ø¨Ø§ØªØ§Øª ØµØ­ÙŠØ© |
| > 0.8 | Ø£Ø®Ø¶Ø± Ø¯Ø§ÙƒÙ† | Ù†Ø¨Ø§ØªØ§Øª Ù…Ù…ØªØ§Ø²Ø© |

#### `satelliteImages.getAvailableDates`

**Ø§Ù„Ù†ÙˆØ¹:** Query  
**Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø©:** Protected  
**Ø§Ù„ÙˆØµÙ:** Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ù„ØªÙˆØ§Ø±ÙŠØ® Ø§Ù„Ù…ØªØ§Ø­Ø© Ù„Ù„ØµÙˆØ± ÙÙŠ Ù…Ù†Ø·Ù‚Ø© Ù…Ø¹ÙŠÙ†Ø©

**Ø§Ù„Ù…Ø¯Ø®Ù„Ø§Øª:**
```typescript
{
  bbox: { minLon, minLat, maxLon, maxLat },
  dateFrom: string,
  dateTo: string
}
```

**Ø§Ù„Ù…Ø®Ø±Ø¬Ø§Øª:**
```typescript
{
  success: boolean;
  dates: string[];
  count: number;
  error?: string;
}
```

#### `satelliteImages.getFieldSatelliteImage`

**Ø§Ù„Ù†ÙˆØ¹:** Mutation  
**Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø©:** Protected  
**Ø§Ù„ÙˆØµÙ:** Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ ØµÙˆØ±Ø© ÙØ¶Ø§Ø¦ÙŠØ© Ù„Ø­Ù‚Ù„ Ù…Ø­Ø¯Ø¯

**Ø§Ù„Ù…Ø¯Ø®Ù„Ø§Øª:**
```typescript
{
  fieldId: number;
  dateFrom: string;
  dateTo: string;
  imageType: "true_color" | "ndvi";
  resolution?: number;
}
```

**Ø§Ù„Ù…Ø®Ø±Ø¬Ø§Øª:**
```typescript
{
  success: boolean;
  fieldName: string;
  imageBase64: string;
  ndviStats?: { mean, min, max };
  date: string;
  resolution: number;
  bbox: { minLon, minLat, maxLon, maxLat };
  error?: string;
}
```

### Setup

#### 1. Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨ Sentinel Hub

1. Ø²ÙŠØ§Ø±Ø© [Copernicus Data Space](https://dataspace.copernicus.eu/)
2. Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨ Ù…Ø¬Ø§Ù†ÙŠ
3. Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ OAuth credentials

#### 2. Ø¥Ø¶Ø§ÙØ© Credentials

ÙÙŠ Settings â†’ Secretsï¼š
```
SENTINEL_HUB_CLIENT_ID=your-client-id
SENTINEL_HUB_CLIENT_SECRET=your-client-secret
```

### Best Practices

**Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„ØªÙˆØ§Ø±ÙŠØ®:** Sentinel-2 ÙŠÙ…Ø± ÙÙˆÙ‚ Ù†ÙØ³ Ø§Ù„Ù…Ù†Ø·Ù‚Ø© ÙƒÙ„ 5 Ø£ÙŠØ§Ù… ØªÙ‚Ø±ÙŠØ¨Ø§Ù‹. Ø§Ø³ØªØ®Ø¯Ù… Ù†Ø·Ø§Ù‚ ØªØ§Ø±ÙŠØ® 7-14 ÙŠÙˆÙ… Ù„Ø¶Ù…Ø§Ù† Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ ØµÙˆØ±Ø©.

**Cloud Coverage:** Ø§Ù„Ù†Ø¸Ø§Ù… ÙŠØ³ØªØ¨Ø¹Ø¯ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ Ø§Ù„ØµÙˆØ± Ø°Ø§Øª Ø§Ù„ØªØºØ·ÙŠØ© Ø§Ù„Ø³Ø­Ø§Ø¨ÙŠØ© > 30%.

**Resolution:** 10m (Ø¯Ù‚Ø© Ø¹Ø§Ù„ÙŠØ©)ØŒ 20m (Ù…ØªÙˆØ³Ø·Ø©)ØŒ 60m (Ù…Ù†Ø®ÙØ¶Ø©).

### Limitations

- **Free Tier:** 1000 requests/month
- **Max bbox size:** ~100 kmÂ²
- **Historical data:** Ù…Ù† 2015 Ø­ØªÙ‰ Ø§Ù„Ø¢Ù†
- **Update frequency:** ÙƒÙ„ 5 Ø£ÙŠØ§Ù…

---

## 11. Weather API (Ø§Ù„Ø·Ù‚Ø³)

### Ù†Ø¸Ø±Ø© Ø¹Ø§Ù…Ø©

ØªÙƒØ§Ù…Ù„ ÙƒØ§Ù…Ù„ Ù…Ø¹ **OpenWeatherMap API** Ù„Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø·Ù‚Ø³ Ø§Ù„Ø­Ø§Ù„ÙŠØ© ÙˆØ§Ù„ØªÙˆÙ‚Ø¹Ø§Øª ÙˆØ§Ù„Ù…Ø¤Ø´Ø±Ø§Øª Ø§Ù„Ø²Ø±Ø§Ø¹ÙŠØ© Ù„Ù„Ù…Ø²Ø§Ø±Ø¹. ÙŠØªØ¶Ù…Ù† 5 procedures Ø±Ø¦ÙŠØ³ÙŠØ© Ù…Ø¹ Redis caching ÙˆØ¯Ø¹Ù… Ø§Ù„Ù„ØºØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©.

### Procedures

#### `weather.getCurrentWeather`

**Ø§Ù„Ù†ÙˆØ¹:** Query  
**Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø©:** Protected  
**Ø§Ù„ÙˆØµÙ:** Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ù„Ø·Ù‚Ø³ Ø§Ù„Ø­Ø§Ù„ÙŠ Ù„Ù…ÙˆÙ‚Ø¹ Ù…Ø­Ø¯Ø¯

**Ø§Ù„Ù…Ø¯Ø®Ù„Ø§Øª:**
```typescript
{
  lat: number;        // -90 Ø¥Ù„Ù‰ 90
  lon: number;        // -180 Ø¥Ù„Ù‰ 180
  farmId?: number;    // Ø§Ø®ØªÙŠØ§Ø±ÙŠ
}
```

**Ø§Ù„Ù…Ø®Ø±Ø¬Ø§Øª:**
```typescript
{
  success: boolean;
  farmId?: number;
  location: { name, lat, lon };
  current: {
    temp: number;           // Ø¯Ø±Ø¬Ø© Ù…Ø¦ÙˆÙŠØ©
    feelsLike: number;
    tempMin: number;
    tempMax: number;
    pressure: number;       // Ù‡ÙƒØªÙˆØ¨Ø§Ø³ÙƒØ§Ù„
    humidity: number;       // %
    visibility: number;     // ÙƒÙ…
    windSpeed: number;      // ÙƒÙ…/Ø³
    windDeg: number;        // Ø¯Ø±Ø¬Ø©
    clouds: number;         // %
    weather: {
      main: string;
      description: string;
      icon: string;
    };
    sunrise: string;        // ISO 8601
    sunset: string;         // ISO 8601
  };
  timestamp: string;
}
```

**Ù…Ø«Ø§Ù„:**
```typescript
const weather = await trpc.weather.getCurrentWeather.useQuery({
  lat: 24.7136,  // Ø§Ù„Ø±ÙŠØ§Ø¶
  lon: 46.6753,
  farmId: 1,
});

console.log(`Ø¯Ø±Ø¬Ø© Ø§Ù„Ø­Ø±Ø§Ø±Ø©: ${weather.current.temp}Â°C`);
console.log(`Ø§Ù„Ø±Ø·ÙˆØ¨Ø©: ${weather.current.humidity}%`);
```

#### `weather.getForecast`

**Ø§Ù„Ù†ÙˆØ¹:** Query  
**Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø©:** Protected  
**Ø§Ù„ÙˆØµÙ:** Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ ØªÙˆÙ‚Ø¹Ø§Øª Ø§Ù„Ø·Ù‚Ø³ Ù„Ù€ 5 Ø£ÙŠØ§Ù…

**Ø§Ù„Ù…Ø¯Ø®Ù„Ø§Øª:**
```typescript
{
  lat: number;
  lon: number;
  farmId?: number;
}
```

**Ø§Ù„Ù…Ø®Ø±Ø¬Ø§Øª:**
```typescript
{
  success: boolean;
  farmId?: number;
  location: { name, lat, lon };
  forecast: Array<{
    date: string;           // YYYY-MM-DD
    temp: { min, max, avg };
    humidity: number;
    pressure: number;
    windSpeed: number;
    clouds: number;
    rain: number;           // mm
    weather: { main, description, icon };
  }>;
  timestamp: string;
}
```

**Ù…Ø«Ø§Ù„:**
```typescript
const forecast = await trpc.weather.getForecast.useQuery({
  lat: 24.7136,
  lon: 46.6753,
});

forecast.forecast.forEach(day => {
  console.log(`${day.date}: ${day.temp.max}Â°C / ${day.temp.min}Â°C`);
});
```

#### `weather.getAgricultural`

**Ø§Ù„Ù†ÙˆØ¹:** Query  
**Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø©:** Protected  
**Ø§Ù„ÙˆØµÙ:** Ø­Ø³Ø§Ø¨ Ø§Ù„Ù…Ø¤Ø´Ø±Ø§Øª Ø§Ù„Ø²Ø±Ø§Ø¹ÙŠØ© (5 Ù…Ø¤Ø´Ø±Ø§Øª)

**Ø§Ù„Ù…Ø¯Ø®Ù„Ø§Øª:**
```typescript
{
  lat: number;
  lon: number;
  farmId?: number;
}
```

**Ø§Ù„Ù…Ø®Ø±Ø¬Ø§Øª:**
```typescript
{
  success: boolean;
  farmId?: number;
  location: { name, lat, lon };
  agricultural: {
    heatStressIndex: {       // Ù…Ø¤Ø´Ø± Ø§Ù„Ø¥Ø¬Ù‡Ø§Ø¯ Ø§Ù„Ø­Ø±Ø§Ø±ÙŠ
      value: number;
      level: 'high' | 'moderate' | 'low';
      description: string;
    };
    irrigationNeed: {        // Ø­Ø§Ø¬Ø© Ø§Ù„Ø±ÙŠ
      level: 'high' | 'medium' | 'low';
      description: string;
    };
    sprayingSuitability: {   // Ù…Ù„Ø§Ø¡Ù…Ø© Ø§Ù„Ø±Ø´
      level: 'good' | 'moderate' | 'poor';
      description: string;
    };
    frostRisk: {             // Ø®Ø·Ø± Ø§Ù„ØµÙ‚ÙŠØ¹
      level: 'high' | 'moderate' | 'none';
      description: string;
    };
    cropGrowthIndex: {       // Ù…Ø¤Ø´Ø± Ù†Ù…Ùˆ Ø§Ù„Ù…Ø­Ø§ØµÙŠÙ„
      value: number;         // 0-100
      level: 'excellent' | 'good' | 'moderate' | 'poor';
      description: string;
    };
  };
  timestamp: string;
}
```

**Ù…Ø«Ø§Ù„:**
```typescript
const agri = await trpc.weather.getAgricultural.useQuery({
  lat: 24.7136,
  lon: 46.6753,
  farmId: 1,
});

if (agri.agricultural.irrigationNeed.level === 'high') {
  console.log('ØªÙ†Ø¨ÙŠÙ‡: Ø­Ø§Ø¬Ø© Ø¹Ø§Ù„ÙŠØ© Ù„Ù„Ø±ÙŠ!');
}

if (agri.agricultural.sprayingSuitability.level === 'poor') {
  console.log('ØªØ­Ø°ÙŠØ±: ØºÙŠØ± Ù…Ù†Ø§Ø³Ø¨ Ù„Ù„Ø±Ø´ Ø§Ù„ÙŠÙˆÙ…');
}
```

#### `weather.getFarmWeather`

**Ø§Ù„Ù†ÙˆØ¹:** Query  
**Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø©:** Protected  
**Ø§Ù„ÙˆØµÙ:** Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø·Ù‚Ø³ Ù…Ø²Ø±Ø¹Ø© Ù…Ø­Ø¯Ø¯Ø© (Ø´Ø§Ù…Ù„)

**Ø§Ù„Ù…Ø¯Ø®Ù„Ø§Øª:**
```typescript
{
  farmId: number;
}
```

**Ø§Ù„Ù…Ø®Ø±Ø¬Ø§Øª:**
```typescript
{
  success: boolean;
  farm: { id, name, location };
  current: { ... };          // Ù…Ù† getCurrentWeather
  forecast: [ ... ];         // Ù…Ù† getForecast
  agricultural: { ... };     // Ù…Ù† getAgricultural
  timestamp: string;
}
```

**Ù…Ø«Ø§Ù„:**
```typescript
const farmWeather = await trpc.weather.getFarmWeather.useQuery({
  farmId: 1,
});

console.log(`Ù…Ø²Ø±Ø¹Ø©: ${farmWeather.farm.name}`);
console.log(`Ø¯Ø±Ø¬Ø© Ø§Ù„Ø­Ø±Ø§Ø±Ø©: ${farmWeather.current.temp}Â°C`);
console.log(`Ù…Ø¤Ø´Ø± Ø§Ù„Ù†Ù…Ùˆ: ${farmWeather.agricultural.cropGrowthIndex.value}`);
```

#### `weather.getAlerts`

**Ø§Ù„Ù†ÙˆØ¹:** Query  
**Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø©:** Protected  
**Ø§Ù„ÙˆØµÙ:** Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ ØªÙ†Ø¨ÙŠÙ‡Ø§Øª Ø§Ù„Ø·Ù‚Ø³

**Ø§Ù„Ù…Ø¯Ø®Ù„Ø§Øª:**
```typescript
{
  lat: number;
  lon: number;
  farmId?: number;
}
```

**Ø§Ù„Ù…Ø®Ø±Ø¬Ø§Øª:**
```typescript
{
  success: boolean;
  farmId?: number;
  location: { name, lat, lon };
  alerts: Array<{
    type: 'extreme_heat' | 'frost' | 'high_wind' | 'rain' | 'irrigation';
    severity: 'high' | 'medium' | 'low';
    title: string;
    description: string;
    icon: string;
  }>;
  alertCount: number;
  timestamp: string;
}
```

**Ù…Ø«Ø§Ù„:**
```typescript
const alerts = await trpc.weather.getAlerts.useQuery({
  lat: 24.7136,
  lon: 46.6753,
  farmId: 1,
});

if (alerts.alertCount > 0) {
  alerts.alerts.forEach(alert => {
    console.log(`${alert.icon} ${alert.title}: ${alert.description}`);
  });
}
```

### Ø§Ù„Ù…Ø¤Ø´Ø±Ø§Øª Ø§Ù„Ø²Ø±Ø§Ø¹ÙŠØ©

| Ø§Ù„Ù…Ø¤Ø´Ø± | Ø§Ù„ÙˆØµÙ | Ø§Ù„Ù†Ø·Ø§Ù‚ | Ø§Ù„Ù…Ø«Ø§Ù„ÙŠ |
|---------|---------|---------|----------|
| **Heat Stress Index** | Ù…Ø¤Ø´Ø± Ø§Ù„Ø¥Ø¬Ù‡Ø§Ø¯ Ø§Ù„Ø­Ø±Ø§Ø±ÙŠ | 0-50 | < 27 (Ù…Ù†Ø®ÙØ¶) |
| **Irrigation Need** | Ø­Ø§Ø¬Ø© Ø§Ù„Ø±ÙŠ | low/medium/high | ÙŠØ¹ØªÙ…Ø¯ Ø¹Ù„Ù‰ Ø§Ù„Ø­Ø±Ø§Ø±Ø© ÙˆØ§Ù„Ø±Ø·ÙˆØ¨Ø© |
| **Spraying Suitability** | Ù…Ù„Ø§Ø¡Ù…Ø© Ø§Ù„Ø±Ø´ | good/moderate/poor | ÙŠØ¹ØªÙ…Ø¯ Ø¹Ù„Ù‰ Ø§Ù„Ø±ÙŠØ§Ø­ |
| **Frost Risk** | Ø®Ø·Ø± Ø§Ù„ØµÙ‚ÙŠØ¹ | none/moderate/high | < 5Â°C (Ø¹Ø§Ù„ÙŠ) |
| **Crop Growth Index** | Ù…Ø¤Ø´Ø± Ù†Ù…Ùˆ Ø§Ù„Ù…Ø­Ø§ØµÙŠÙ„ | 0-100 | > 80 (Ù…Ù…ØªØ§Ø²) |

### Setup

#### 1. Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨ OpenWeatherMap

1. Ø²ÙŠØ§Ø±Ø© [OpenWeatherMap](https://openweathermap.org/api)
2. Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨ Ù…Ø¬Ø§Ù†ÙŠ (Sign Up)
3. Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ API key

#### 2. Ø¥Ø¶Ø§ÙØ© API Key

ÙÙŠ Settings â†’ Secretsï¼š
```
OPENWEATHER_API_KEY=your-api-key
```

### Best Practices

**Caching:** Ø§Ù„Ø·Ù‚Ø³ Ø§Ù„Ø­Ø§Ù„ÙŠ ÙŠÙØ­ÙØ¸ Ù„Ù…Ø¯Ø© 10 Ø¯Ù‚Ø§Ø¦Ù‚ØŒ Ø§Ù„ØªÙˆÙ‚Ø¹Ø§Øª Ù„Ù…Ø¯Ø© Ø³Ø§Ø¹Ø©.

**Ø§Ù„ØªØ­Ø¯ÙŠØ« Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ:** Ø§Ø³ØªØ®Ø¯Ù… `refetchInterval` Ù„Ù„ØªØ­Ø¯ÙŠØ« Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ ÙƒÙ„ 5 Ø¯Ù‚Ø§Ø¦Ù‚.

**Ø§Ù„Ù…Ø¤Ø´Ø±Ø§Øª Ø§Ù„Ø²Ø±Ø§Ø¹ÙŠØ©:** ÙŠÙØ­Ø³Ø¨ Ù…Ù† Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø·Ù‚Ø³ Ø§Ù„Ø­Ø§Ù„ÙŠØ© Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Ù…Ø¹Ø§Ø¯Ù„Ø§Øª Ù…Ø¹ØªÙ…Ø¯Ø©.

### Limitations

- **Free Tier:** 1000 calls/day
- **Update frequency:** ÙƒÙ„ 10 Ø¯Ù‚Ø§Ø¦Ù‚ (Ù…Ø¹ caching)
- **Language:** Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© Ù…Ø¯Ø¹ÙˆÙ…Ø©
- **Units:** Ù…ØªØ±ÙŠØ© (Ø¯Ø±Ø¬Ø© Ù…Ø¦ÙˆÙŠØ©)

---

## Ø§Ù„Ø®Ù„Ø§ØµØ©

ØªÙˆÙØ± Ù…Ù†ØµØ© Ø³ÙÙ‡ÙˆÙ„ ÙˆØ§Ø¬Ù‡Ø© Ø¨Ø±Ù…Ø¬Ø© ØªØ·Ø¨ÙŠÙ‚Ø§Øª Ø´Ø§Ù…Ù„Ø© ÙˆÙ…ÙØ­Ø³Ù‘Ù†Ø© ØªØ¯Ø¹Ù… Ø¬Ù…ÙŠØ¹ Ù…ÙŠØ²Ø§Øª Ø§Ù„Ù…Ù†ØµØ©. ØªØªÙ…ÙŠØ² Ø§Ù„ÙˆØ§Ø¬Ù‡Ø© Ø¨Ø§Ù„Ø£Ù…Ø§Ù† ÙˆØ§Ù„Ø£Ø¯Ø§Ø¡ Ø§Ù„Ø¹Ø§Ù„ÙŠ ÙˆØ§Ù„ØªÙˆØ«ÙŠÙ‚ Ø§Ù„Ø´Ø§Ù…Ù„ØŒ Ù…Ù…Ø§ ÙŠØ¬Ø¹Ù„Ù‡Ø§ Ù…Ù†Ø§Ø³Ø¨Ø© Ù„Ù„ØªØ·Ø¨ÙŠÙ‚Ø§Øª Ø§Ù„Ø¥Ù†ØªØ§Ø¬ÙŠØ©.

### Ø§Ù„Ù…ÙŠØ²Ø§Øª Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© ÙÙŠ Ø§Ù„Ø¥ØµØ¯Ø§Ø± 2.0

- âœ… **Dashboard API**: Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø´Ø§Ù…Ù„Ø© ÙˆØ±Ø³ÙˆÙ… Ø¨ÙŠØ§Ù†ÙŠØ©
- âœ… **Redis Caching**: ØªØ­Ø³ÙŠÙ† Ø§Ù„Ø£Ø¯Ø§Ø¡ Ø¨Ù†Ø³Ø¨Ø© 80%
- âœ… **AI Work Planner**: ØªÙˆØµÙŠØ§Øª Ø°ÙƒÙŠØ© Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
- âœ… **Cache Invalidation**: Ø¥Ù„ØºØ§Ø¡ ØªÙ„Ù‚Ø§Ø¦ÙŠ Ø¹Ù†Ø¯ Ø§Ù„ØªØ­Ø¯ÙŠØ«
- âœ… **Sentinel Hub Integration**: ØµÙˆØ± Ø£Ù‚Ù…Ø§Ø± ØµÙ†Ø§Ø¹ÙŠØ© Ù…Ø¹ NDVI
- âœ… **Weather API**: Ø·Ù‚Ø³ Ø­Ø§Ù„ÙŠ ÙˆØªÙˆÙ‚Ø¹Ø§Øª ÙˆÙ…Ø¤Ø´Ø±Ø§Øª Ø²Ø±Ø§Ø¹ÙŠØ©

---

**Â© 2025 Ù…Ù†ØµØ© Ø³ÙÙ‡ÙˆÙ„ - Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø©**
